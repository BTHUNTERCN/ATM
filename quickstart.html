

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick-start guide &mdash; ATM 0.1.2-dev documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Guide to the ModelHub database" href="database.html" />
    <link rel="prev" title="Setup" href="setup.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ATM
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">ATM: Scalable model selection and tuning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#our-goal-flexibility-and-power">Our goal: flexibility and power</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup.html#requirements">0. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#install-atm">1. Install ATM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="setup.html#install-using-pip">Install using pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="setup.html#install-from-source">Install from source</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#install-a-database">2. Install a database</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#start-using-atm">3. Start using ATM!</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick-start guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-a-datarun">Create a datarun</a></li>
<li class="toctree-l2"><a class="reference internal" href="#execute-the-datarun">Execute the datarun</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Guide to the ModelHub database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="database.html#datasets">Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html#dataruns">Dataruns</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html#hyperpartitions">Hyperpartitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html#classifiers">Classifiers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">REST API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#quickstart">Quickstart</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.html#start-the-rest-api-server">1. Start the REST API Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#create-a-dataset">2. Create a Dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#trigger-a-datarun">3. Trigger a Datarun</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#browse-the-results">4. Browse the results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api.html#get-all-objects-from-a-model">Get all objects from a model</a></li>
<li class="toctree-l4"><a class="reference internal" href="api.html#get-a-single-object-by-id">Get a single object by id</a></li>
<li class="toctree-l4"><a class="reference internal" href="api.html#get-all-the-children-objects">Get all the children objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html#additional-information">Additional information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.html#start-additional-process-with-different-pid-file">Start additional process with different pid file</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#restart-the-atm-process">Restart the ATM process</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#stop-the-atm-process">Stop the ATM process</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#start-the-atm-rest-api-server-in-foreground">Start the ATM REST API server in foreground</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to ATM and BTB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#ways-to-contribute">Ways to contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#style">Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#tests">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#docs">Docs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="add_method.html">Adding a classification method</a><ul>
<li class="toctree-l2"><a class="reference internal" href="add_method.html#valid-method-classes">1. Valid method classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="add_method.html#creating-the-json-file">2. Creating the JSON file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="add_method.html#defining-hyperparameters">Defining hyperparameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="add_method.html#defining-the-conditional-parameter-tree">Defining the Conditional Parameter Tree</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="add_method.html#optional-adding-a-new-method-to-the-atm-library">3. (Optional) Adding a new method to the ATM library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="add_to_btb.html">Adding a BTB Selector or Tuner</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ATM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quick-start guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/HDI-project/ATM/blob/master/docs/quickstart.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start-guide">
<h1>Quick-start guide<a class="headerlink" href="#quick-start-guide" title="Permalink to this headline">¶</a></h1>
<p>This page is a quick tutorial to help you get ATM up and running for the first
time. We’ll use a featurized dataset for a binary classification problem,
already saved in <code class="docutils literal notranslate"><span class="pre">atm/data/test/pollution_1.csv</span></code>. This is one of the datasets
available on <a class="reference external" href="https://openml.org">openml.org</a>.  More information about the
data can be found <a class="reference external" href="https://www.openml.org/d/542">here</a>.</p>
<p>Our goal is predict mortality using the metrics associated with the air
pollution. Below we show a snapshot of the csv file. The dataset has 15
features, all numeric, and and a binary label column called “class”.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PREC    JANT    JULT    OVR65   POPN    EDUC    HOUS    DENS    NONW    WWDRK   POOR    HC      NOX     SO@     HUMID   class
35      23      72      11.1    3.14    11      78.8    4281    3.5     50.7    14.4    8       10      39      57      1
44      29      74      10.4    3.21    9.8     81.6    4260    0.8     39.4    12.4    6       6       33      54      1
47      45      79      6.5     3.41    11.1    77.5    3125    27.1    50.2    20.6    18      8       24      56      1
43      35      77      7.6     3.44    9.6     84.6    6441    24.4    43.7    14.3    43      38      206     55      1
53      45      80      7.7     3.45    10.2    66.8    3325    38.5    43.1    25.5    30      32      72      54      1
43      30      74      10.9    3.23    12.1    83.9    4679    3.5     49.2    11.3    21      32      62      56      0
45      30      73      9.3     3.29    10.6    86      2140    5.3     40.4    10.5    6       4       4       56      0
..      ..      ..      ...     ....    ....    ...     ....    ..      ....    ....    ..      ..      ..      ..      .
..      ..      ..      ...     ....    ....    ...     ....    ..      ....    ....    ..      ..      ..      ..      .
..      ..      ..      ...     ....    ....    ...     ....    ..      ....    ....    ..      ..      ..      ..      .
37      31      75      8       3.26    11.9    78.4    4259    13.1    49.6    13.9    23      9       15      58      1
35      46      85      7.1     3.22    11.8    79.9    1441    14.8    51.2    16.1    1       1       1       54      0
</pre></div>
</div>
<div class="section" id="create-a-datarun">
<h2>Create a datarun<a class="headerlink" href="#create-a-datarun" title="Permalink to this headline">¶</a></h2>
<p>Before we can train any classifiers, we need to create a datarun. In ATM, a
datarun is a single logical machine learning task. The <code class="docutils literal notranslate"><span class="pre">enter_data.py</span></code> script
will set up everything you need.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(atm-env) $ atm enter_data
</pre></div>
</div>
<p>The first time you run it, the above command will create a ModelHub database, a
dataset, and a datarun. If you run it without any arguments, it will load
configuration from the default values defined in <code class="docutils literal notranslate"><span class="pre">atm/config.py</span></code>. By default,
it will create a new SQLite3 database at ./atm.db, create a new dataset instance
which refers to the data at <code class="docutils literal notranslate"><span class="pre">atm/data/test/pollution_1.csv</span></code>, and create a
datarun instance which points to that dataset.</p>
<p>The command should produce output that looks something like this::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">method</span> <span class="n">logreg</span> <span class="n">has</span> <span class="mi">6</span> <span class="n">hyperpartitions</span>
<span class="n">method</span> <span class="n">dt</span> <span class="n">has</span> <span class="mi">2</span> <span class="n">hyperpartitions</span>
<span class="n">method</span> <span class="n">knn</span> <span class="n">has</span> <span class="mi">24</span> <span class="n">hyperpartitions</span>
<span class="n">Data</span> <span class="n">entry</span> <span class="n">complete</span><span class="o">.</span> <span class="n">Summary</span><span class="p">:</span>
                                <span class="n">Dataset</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span>
                                <span class="n">Training</span> <span class="n">data</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">bcyphers</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">fl</span><span class="o">/</span><span class="n">atm</span><span class="o">/</span><span class="n">atm</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">test</span><span class="o">/</span><span class="n">pollution_1</span><span class="o">.</span><span class="n">csv</span>
                                <span class="n">Test</span> <span class="n">data</span><span class="p">:</span> <span class="kc">None</span>
                                <span class="n">Datarun</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span>
                                <span class="n">Hyperpartition</span> <span class="n">selection</span> <span class="n">strategy</span><span class="p">:</span> <span class="n">uniform</span>
                                <span class="n">Parameter</span> <span class="n">tuning</span> <span class="n">strategy</span><span class="p">:</span> <span class="n">uniform</span>
                                <span class="n">Budget</span><span class="p">:</span> <span class="mi">100</span> <span class="p">(</span><span class="n">classifier</span><span class="p">)</span>
</pre></div>
</div>
<p>The datarun you just created will train classifiers using the “logreg”
(logistic regression), “dt” (decision tree), and “knn” (k nearest neighbors)
methods. It is using the “uniform” strategy for both hyperpartition selection
and parameter tuning, meaning it will choose parameters uniformly at random. It
has a budget of 100 classifiers, meaning it will train and test 100 models
before completing. More info about what is stored in the database, and
what the fields of the datarun control, can be found <a class="reference external" href="database.html">here</a>.</p>
<p>The most important piece of information is the datarun ID. You’ll need to
reference that when you want to actually compute on the datarun.</p>
</div>
<div class="section" id="execute-the-datarun">
<h2>Execute the datarun<a class="headerlink" href="#execute-the-datarun" title="Permalink to this headline">¶</a></h2>
<p>An ATM <em>worker</em> is a process that connects to a ModelHub, asks it what dataruns
need to be worked on, and trains and tests classifiers until all the work is
done. To run one, use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(atm-env) $ atm worker.py
</pre></div>
</div>
<p>This will start a process that builds classifiers, tests them, and saves them to
the ./models/ directory. As it runs, it should print output indicating which
hyperparameters are being tested, the performance of each classifier it builds,
and the best overall performance so far. One round of training looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Computing on datarun 1
Selector: &lt;class &#39;btb.selection.uniform.Uniform&#39;&gt;
Tuner: &lt;class &#39;btb.tuning.uniform.Uniform&#39;&gt;
Chose parameters for method &quot;knn&quot;:
        _scale = True
        algorithm = brute
        metric = euclidean
        n_neighbors = 8
        weights = distance
        Judgment metric (f1, cv): 0.813 +- 0.081
New best score! Previous best (classifier 24): 0.807 +- 0.284
Saving model in: models/pollution_1-62233d75.model
Saving metrics in: metrics/pollution_1-62233d75.metric
Saved classifier 63.
</pre></div>
</div>
<p>And that’s it! You’re executing your first datarun, traversing the vast space
of hyperparameters to find the absolute best model for your problem. You can
break out of the worker with Ctrl+C and restart it with the same command; it
will pick up right where it left off. You can also run the command
simultaneously in different terminals to parallelize the work – all workers
will refer to the same ModelHub database.</p>
<p>Occassionally, a worker will encounter an error in the process of building and
testing a classifier. Don’t worry: when this happens, the worker will print
error data to the terminal, log the error in the database, and move on to the
next classifier.</p>
<p>When all 100 classifiers in your budget have been built, the datarun is
finished! All workers will exit gracefully.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Classifier budget has run out!
Datarun 1 has ended.
No dataruns found. Exiting.
</pre></div>
</div>
<p>You can then load the best classifier from the datarun and use it to make
predictions on new datapoints.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">atm.database</span> <span class="k">import</span> <span class="n">Database</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;sqlite&#39;</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="s1">&#39;atm.db&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">classifier_id</span><span class="o">=</span><span class="mi">110</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;atm/data/test/pollution_1.csv&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="database.html" class="btn btn-neutral float-right" title="Guide to the ModelHub database" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="setup.html" class="btn btn-neutral float-left" title="Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, MIT Data to AI Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>